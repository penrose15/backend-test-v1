## 사용 가이드

### 환경 변수

**환경 변수 등록**

- `MARIADB_URL`: mariadb url
- `MARIADB_USER`: mariadb 유저명
- `MARIADB_PASSWORD`: mariadb 비밀번호
- `PG_BASE_URL` : TestPG API의 URL
- `API-KEY` : TestPG API 요청 헤더에 들어가는 API Key
- `IV` : TestPg API 요청 시 body 값 암호화 에 사용되는 IV

### docker-compose.yml 실행 방법
```
docker-compose --env-file <.env 파일경로> up -d
```

.env 파일 생성 후, .env파일에 환경 변수 추가
- `MARIADB_DATABASE`: DB 명
- `MARIADB_PASSWORD`: mariadb 비밀번호
- `MARIADB_ROOT_PASSWORD`: root 계정 비밀번호
- `MARIADB_USER`: mariadb 유저명

### API 사양

Swagger UI 
- http://localhost:8080/swagger-ui/index.html

1. 결제 생성
```
POST /api/v1/payments
{
  "partnerId": 1,
  "amount": 1000,
  "cardBin": "111111",
  "cardLast4": "1111",
  "expiry": "1227",
  "birthDate": "19900101",
  "password": "12",
  "productName": "Test Product"
}

200OK
{
    "id": 1,
    "partnerId": 1,
    "amount": 600,
    "appliedFeeRate": 0.023500,
    "feeAmount": 14,
    "netAmount": 586,
    "cardLast4": "1111",
    "approvalCode": "10208157",
    "approvedAt": "2025-10-20 22:00:26",
    "status": "APPROVED",
    "createdAt": "2025-10-20 22:00:26"
}
```

2. 결제 조회(통계 + 커서)

```
GET /api/v1/payments?partnerId=1&status=APPROVED&from=2025-10-17 23:59:20&to=2025-10-19 23:59:20&limit=20&cursor=${nextCursorAt + nextCursorId 조합을 Base64로 인코딩한 문자열}

200OK
{
    "items": [{...}, ...],
    "summary": {
        "count": 25,
        "totalAmount": 10000,
        "totalNetAmount": 9000
    },
    "nextCursor": "MTc2M...",
    "hasNext": true
}
```


